{% extends 'base.html' %}
{% load crispy_forms_tags %}
{% block title %} Blog-{{ article.title }} {% endblock %}

{% block container %}
  <main class="mt-5 pt-5 orange">
  {% if messages %}
      {% for message in messages %}
          <div class="alert alert-{{ message.tags }} alert-dismissible fade show">
            {{ message }}
          </div>
      {% endfor %}
  {% endif %}
    <div class="container">

      <!--Section: Post-->
      <section class="mt-4">

        <!--Grid row-->
        <div class="row">

          <!--Grid column-->
          <div class="col-md-12 mb-4">

            <!--Featured Image-->
            <div class="card mb-4 wow fadeIn">

              <img src="{{ article.image.url }}" class="img-fluid" alt="{{ article.title }}">

            </div>
            <!--Card-->
            <div class="card mb-4 wow fadeIn">

              <!--Card content-->
              <div class="card-body">

                <p class="h5 my-4">{{ article.title }}</p>
                  {{ article.content|safe }}

              </div>

            </div>
            <!--/.Card-->

            <!--Card-->
            <div class="card mb-4 wow fadeIn">

              <div class="card-header font-weight-bold">
                <span>A propos de l'auteur</span>
                <span class="pull-right">
                  <a href="">
                    <i class="fab fa-facebook-f mr-2"></i>
                  </a>
                  <a href="">
                    <i class="fab fa-instagram mr-2"></i>
                  </a>
                </span>
              </div>

              <!--Card content-->
              <div class="card-body">

                <div class="media d-block d-md-flex mt-3">
                  <img class="d-flex mb-3 mx-auto z-depth-1" src="https://mdbootstrap.com/img/Photos/Avatars/img (30).jpg"
                    alt="Generic placeholder image" style="width: 100px;">
                  <div class="media-body text-center text-md-left ml-md-3 ml-0">
                    <h5 class="mt-0 font-weight-bold">{{ article.author }}
                    </h5>
                    At vero eos et accusamus et iusto odio dignissimos ducimus qui blanditiis praesentium voluptatum
                    deleniti atque corrupti
                    quos dolores et quas molestias excepturi sint occaecati cupiditate non provident,
                    similique sunt in culpa qui officia deserunt mollitia animi, id est laborum et dolorum
                    fuga.
                  </div>
                </div>

              </div>

            </div>
            <!--/.Card-->

            <!--Comments-->
            <div class="card card-comments mb-3 wow fadeIn">
              <div class="card-header font-weight-bold">{{ article.comments.all|length }} commentaire(s)</div>
              <div class="card-body">
                {% for comment in article.comments.all %}
                <div class="media d-block d-md-flex mt-4">
                  <div class="media-body text-center text-md-left ml-md-3 ml-0">
                    <h5 class="mt-0 font-weight-bold">{{ comment.author_name }} - <i>{{ comment.created_at|date:"SHORT_DATE_FORMAT" }}</i></h5>
                    <p>
                      {{ comment.text }}
                    </p>

                  </div>
                </div>
                    {% empty %}
                    <p>Pas de commentaires :(</p>
                  {% endfor %}
              </div>
            </div>
            <!--/.Comments-->

            <!--Reply-->
            <div class="card mb-3 wow fadeIn">
              <div class="card-header font-weight-bold">Donnez votre avis</div>
              <div class="card-body">
                  {% include 'form.html' %}
              </div>
            </div>
            <!--/.Reply-->

          </div>
          <!--Grid column-->

          <!--Grid column-->
          <div class="col-md-12 mb-4">

            <!--Card: Jumbotron-->
            <div class="card blue-gradient mb-4 wow fadeIn">

              <!-- Content -->
              <div class="card-body text-white text-center">

                <h4 class="mb-4">
                  <strong>...</strong>
                </h4>
                <p>
                  <strong>Meilleures photos</strong>
                </p>
                <p class="mb-4">
                  <strong>Voir la gallerie</strong>
                </p>
                <a href="{% url 'blog_frontend:home' %}" class="btn btn-outline-white btn-md">Cliquer ici
                  <i class="fas fa-hand-right ml-2"></i>
                </a>

              </div>
              <!-- Content -->
            </div>
            <!--Card: Jumbotron-->

            <!--Card : Dynamic content wrapper-->
            <div class="card mb-4 text-center wow fadeIn">

              <div class="card-header">Do you want to get informed about new articles?</div>

              <!--Card content-->
              <div class="card-body">

                <!-- Default form login -->
                <form action="{% url 'signup' %}" method="post">
                    {% csrf_token %}
                    {{ newsletter_signup_form|crispy }}
                    <input type="hidden" name="next" value="{{ request.path }}"/>
                  <div class="text-center mt-4">
                    <button class="btn btn-info btn-md" type="submit">S'inscrire</button>
                  </div>
                </form>
                <!-- Default form login -->

              </div>

            </div>
            <!--/.Card : Dynamic content wrapper-->

            <!--Card-->
            <div class="card mb-4 wow fadeIn">

              <div class="card-header">Articles similaires</div>

              <!--Card content-->
              <div class="card-body">

                <ul class="list-unstyled">
                    {% for article in related_articles %}
                  <li class="media mt-2">
                    <img class="rounded float-left img-fluid" style="width:50%; height:200px;"
                         src="{{ article.image.url }}" alt="{{ article.title }}">
                    <div class="media-body ml-3">
                      <a href="{% url 'article_details' article.slug %}">
                        <h5 class="mt-0 mb-1 font-weight-bold">{{ article.title }}</h5>
                      </a>
                    </div>
                  </li>
                    {% empty %}
                    {% endfor %}
                </ul>

              </div>

            </div>
            <!--/.Card-->

          </div>
          <!--Grid column-->

        </div>
        <!--Grid row-->

      </section>
      <!--Section: Post-->

    </div>
  </main>
  <!--Main layout-->
{% endblock %}
